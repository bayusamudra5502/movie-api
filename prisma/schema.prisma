generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userId    String     @id @default(uuid()) @map("id")
  timestamp DateTime   @default(now())
  email     String     @unique @db.VarChar(200)
  password  String
  favorite  Favorite[]
  movie     Movie[]
  vote      Vote[]
}

model Movie {
  movieId    Int        @id @default(autoincrement())
  timestamp  DateTime   @default(now())
  authorId   String     
  categoryId String
  title      String
  sinopsis   String
  release    String
  image      String
  author     User       @relation(fields: [authorId], references: [userId])
  category   Category   @relation(fields: [categoryId], references: [categoryId])
  favorite   Favorite[]
  vote       Vote[]
}

model Vote {
  voteId  Int @id @default(autoincrement())
  movie   Movie @relation(fields: [movieId], references: [movieId])
  user    User @relation(fields: [userId], references: [userId])
  movieId Int
  userId  String 
  vote    Int
}

model Category {
  categoryId   String  @id @default(uuid())
  categoryName String  @unique
  movie        Movie[]
}

model Favorite {
  favoriteId Int    @id @default(autoincrement())
  userId     String
  movieId    Int
  movie      Movie  @relation(fields: [movieId], references: [movieId])
  user       User   @relation(fields: [userId], references: [userId])
}
